{"Version":"2019-10-30","StartAction":"132e7fb0-6d9d-42de-82d2-5df8463c51e0","Metadata":{"entryPointPosition":{"x":-1172,"y":12},"ActionMetadata":{"14082080-7d7e-402f-bfec-8d5bc50f9167":{"position":{"x":1272,"y":39.2}},"84025ad9-290a-4df7-af24-a40246a6d568":{"position":{"x":293.6,"y":14.4},"parameters":{"QueueId":{"displayName":"Voice_Parking_Lot"}},"queue":{"text":"Voice_Parking_Lot"}},"Set notes field-copy-1":{"position":{"x":-356,"y":-6.4},"isFriendlyName":true,"parameters":{"Attributes":{"sfdc-CallBackInMinutes__c":{"useDynamic":true},"sfdc-AWS_Username__c":{"useDynamic":true},"sfdc-InitialContactId__c":{"useDynamic":true},"UserId":{"useDynamic":true},"sfdc-Call_Description__c":{"useDynamic":true}}},"dynamicParams":["sfdc-CallBackInMinutes__c","sfdc-AWS_Username__c","sfdc-InitialContactId__c","UserId","sfdc-Call_Description__c"]},"Save Id of TransferVC Created":{"position":{"x":69.6,"y":16.8},"isFriendlyName":true,"parameters":{"Attributes":{"TransferCallRecordId":{"useDynamic":true}}},"dynamicParams":["TransferCallRecordId"]},"Create TransferVC":{"position":{"x":-143.2,"y":13.6},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"ndrProdCC-InvokeTelephonyIntegrationApiFunction"}},"dynamicMetadata":{"methodName":false,"sfdc-CallDisposition":false,"sfdc-UserId":false,"sfdc-OwnerId":false}},"891adf0c-5e0b-4bd4-a905-6cd8a4562035":{"position":{"x":1036,"y":2.4}},"b3803474-e606-46d8-821b-5991b5d1a634":{"position":{"x":523.2,"y":6.4},"parameters":{"EventHooks":{"CustomerQueue":{"displayName":"_Negotiations LHT - Customer Queue Loop"}}},"contactFlow":{"text":"_Negotiations LHT - Customer Queue Loop","id":"arn:aws:connect:us-east-1:792684595219:instance/5d95e262-b582-453a-af91-ee33a4dc6fce/contact-flow/e377e176-a3a1-48a0-ab12-91d41472cafe"},"customerOrAgent":true},"Create Voice Call Share":{"position":{"x":786.4,"y":7.2},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"ndrProdCC-InvokeSalesforceRestApiFunction:active"},"LambdaInvocationAttributes":{"ParentId":{"useDynamic":true},"UserOrGroupId":{"useDynamic":true}}},"dynamicMetadata":{"methodName":false,"objectApiName":false,"AccessLevel":false,"ParentId":true,"RowCause":false,"UserOrGroupId":true}},"query hold duration in minutes":{"position":{"x":-572.8,"y":-0.8},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"ndrProdCC-InvokeSalesforceRestApiFunction:active"}},"dynamicMetadata":{"methodName":false,"soql":false}},"132e7fb0-6d9d-42de-82d2-5df8463c51e0":{"position":{"x":-1054.4,"y":0}},"4da5ae01-607f-44ad-a808-c2d9141afb35":{"position":{"x":-816.8,"y":-9.6}}},"Annotations":[{"type":"default","id":"eac11d5a-d678-42c4-8027-22c3d5d426dd","content":"added 1/2 to help trouble shoot call recording issues with LHT","actionId":"","isFolded":false,"position":{"x":-1077,"y":191},"size":{"height":295,"width":300}}],"name":"_Negotiations LHT - Park Voice Call","description":"","type":"queueTransfer","status":"published","hash":{}},"Actions":[{"Parameters":{},"Identifier":"14082080-7d7e-402f-bfec-8d5bc50f9167","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:792684595219:instance/5d95e262-b582-453a-af91-ee33a4dc6fce/queue/2479efcc-31d2-4c3e-847a-6cc646988d6e"},"Identifier":"84025ad9-290a-4df7-af24-a40246a6d568","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"b3803474-e606-46d8-821b-5991b5d1a634","Errors":[{"NextAction":"b3803474-e606-46d8-821b-5991b5d1a634","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"sfdc-CallBackInMinutes__c":"$.External.CallBackInMinutes__c","sfdc-AWS_Username__c":"$.Attributes.AWSUsername","sfdc-InitialContactId__c":"$.InitialContactId","UserId":"$.External.UserId","sfdc-CurrentSegment__c":"true","sfdc-Call_Description__c":"$.External.Call_Description__c"},"TargetContact":"Current"},"Identifier":"Set notes field-copy-1","Type":"UpdateContactAttributes","Transitions":{"NextAction":"Create TransferVC","Errors":[{"NextAction":"Create TransferVC","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"TransferCallRecordId":"$.External.voiceCallId"},"TargetContact":"Current"},"Identifier":"Save Id of TransferVC Created","Type":"UpdateContactAttributes","Transitions":{"NextAction":"84025ad9-290a-4df7-af24-a40246a6d568","Errors":[{"NextAction":"84025ad9-290a-4df7-af24-a40246a6d568","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:792684595219:function:ndrProdCC-InvokeTelephonyIntegrationApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"createTransferVC","sfdc-CallDisposition":"completed","sfdc-UserId":"0058V00000Dj1M9QAJ","sfdc-OwnerId":"0058V00000Dj1M9QAJ"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"Create TransferVC","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"Save Id of TransferVC Created","Errors":[{"NextAction":"Save Id of TransferVC Created","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"891adf0c-5e0b-4bd4-a905-6cd8a4562035","Type":"TransferContactToQueue","Transitions":{"NextAction":"14082080-7d7e-402f-bfec-8d5bc50f9167","Errors":[{"NextAction":"14082080-7d7e-402f-bfec-8d5bc50f9167","ErrorType":"QueueAtCapacity"},{"NextAction":"14082080-7d7e-402f-bfec-8d5bc50f9167","ErrorType":"NoMatchingError"}]}},{"Parameters":{"EventHooks":{"CustomerQueue":"arn:aws:connect:us-east-1:792684595219:instance/5d95e262-b582-453a-af91-ee33a4dc6fce/contact-flow/e377e176-a3a1-48a0-ab12-91d41472cafe"}},"Identifier":"b3803474-e606-46d8-821b-5991b5d1a634","Type":"UpdateContactEventHooks","Transitions":{"NextAction":"Create Voice Call Share","Errors":[{"NextAction":"Create Voice Call Share","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:792684595219:function:ndrProdCC-InvokeSalesforceRestApiFunction:active","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"createRecord","objectApiName":"VoiceCallShare","AccessLevel":"Edit","ParentId":"$.Attributes.TransferCallRecordId","RowCause":"Manual","UserOrGroupId":"$.Attributes.UserId"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"Create Voice Call Share","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"891adf0c-5e0b-4bd4-a905-6cd8a4562035","Errors":[{"NextAction":"891adf0c-5e0b-4bd4-a905-6cd8a4562035","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:792684595219:function:ndrProdCC-InvokeSalesforceRestApiFunction:active","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"queryRecord","soql":"SELECT Call_Description__c, UserId, AWS_Username__c, CallBackInMinutes__c FROM VoiceCall WHERE VendorCallKey = '$.Attributes.InitialContactId'"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"query hold duration in minutes","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"Set notes field-copy-1","Errors":[{"NextAction":"Set notes field-copy-1","ErrorType":"NoMatchingError"}]}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"132e7fb0-6d9d-42de-82d2-5df8463c51e0","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"4da5ae01-607f-44ad-a808-c2d9141afb35"}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"]},"AnalyticsBehavior":{"Enabled":"True","AnalyticsLanguage":"en-US","AnalyticsRedactionBehavior":"Disabled","AnalyticsRedactionResults":"RedactedAndOriginal","ChannelConfiguration":{"Chat":{"AnalyticsModes":[]},"Voice":{"AnalyticsModes":["RealTime"]}}}},"Identifier":"4da5ae01-607f-44ad-a808-c2d9141afb35","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"query hold duration in minutes"}}]}