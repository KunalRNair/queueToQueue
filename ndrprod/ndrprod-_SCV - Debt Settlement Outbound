{"Version":"2019-10-30","StartAction":"0af1a260-10dc-4315-8fec-e3f4c2d67b93","Metadata":{"entryPointPosition":{"x":-1363.2,"y":-11.2},"ActionMetadata":{"0af1a260-10dc-4315-8fec-e3f4c2d67b93":{"position":{"x":-1228.8,"y":-19.2}},"Define AWS Username":{"position":{"x":-899.2,"y":-16.8},"isFriendlyName":true,"parameters":{"Attributes":{"AWSUsername":{"useDynamic":true}}},"dynamicParams":["AWSUsername"]},"Query SFDC Agent":{"position":{"x":-608.8,"y":-24.8},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"ndrccint-InvokeSalesforceRestApiFunction"}},"dynamicMetadata":{"methodName":false,"soql":false}},"Set CallerIdGroup":{"position":{"x":-346.4,"y":-9.6},"isFriendlyName":true,"parameters":{"Attributes":{"CallerIdGroup":{"useDynamic":true}}},"dynamicParams":["CallerIdGroup"]},"46971a65-27a1-4110-96fc-e210ae2bf6ba":{"position":{"x":652.8,"y":8.8}},"SOQL DID Phone Number":{"position":{"x":-104.8,"y":-12},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"ndrccint-InvokeSalesforceRestApiFunction"}},"dynamicMetadata":{"methodName":false,"soql":false}},"Set CallerId":{"position":{"x":394.4,"y":-1.6},"isFriendlyName":true,"parameters":{"CallerId":{"Number":{"inputOption":"dynamic"}}},"setOptionalCallerId":true,"callerIdSource":"dynamic","useDynamicConnectionTimeout":false},"Recording ON":{"position":{"x":171.2,"y":7.2},"isFriendlyName":true}},"Annotations":[],"name":"_SCV - Debt Settlement Outbound","description":"Starts transcription using Contact Lens for Amazon Connect, capturing and transcribing audio for outbound voice calls.","type":"outboundWhisper","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"0af1a260-10dc-4315-8fec-e3f4c2d67b93","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"Define AWS Username"}},{"Parameters":{"Attributes":{"AWSUsername":"$.Agent.UserName"},"TargetContact":"Current"},"Identifier":"Define AWS Username","Type":"UpdateContactAttributes","Transitions":{"NextAction":"Query SFDC Agent","Errors":[{"NextAction":"Query SFDC Agent","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:064441548295:function:ndrccint-InvokeSalesforceRestApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"queryRecord","soql":"SELECT Caller_ID_Group__c FROM User WHERE AgentAWSUsername__c = '$.Attributes.AWSUsername'"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"Query SFDC Agent","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"Set CallerIdGroup","Errors":[{"NextAction":"Set CallerIdGroup","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"CallerIdGroup":"$.External.Caller_ID_Group__c"},"TargetContact":"Current"},"Identifier":"Set CallerIdGroup","Type":"UpdateContactAttributes","Transitions":{"NextAction":"SOQL DID Phone Number","Errors":[{"NextAction":"SOQL DID Phone Number","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"46971a65-27a1-4110-96fc-e210ae2bf6ba","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:064441548295:function:ndrccint-InvokeSalesforceRestApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"queryRecord","soql":"Select Plus_1_Phone_Number__c FROM DID__c WHERE Caller_Id_Group__c = '$.Attributes.CallerIdGroup'"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"SOQL DID Phone Number","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"Recording ON","Errors":[{"NextAction":"Recording ON","ErrorType":"NoMatchingError"}]}},{"Parameters":{"CallerId":{"Number":"$.External.Plus_1_Phone_Number__c"}},"Identifier":"Set CallerId","Type":"CompleteOutboundCall","Transitions":{"NextAction":"46971a65-27a1-4110-96fc-e210ae2bf6ba"}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"]},"AnalyticsBehavior":{"Enabled":"True","AnalyticsLanguage":"en-US","AnalyticsRedactionBehavior":"Disabled","AnalyticsRedactionResults":"RedactedAndOriginal","ChannelConfiguration":{"Chat":{"AnalyticsModes":[]},"Voice":{"AnalyticsModes":["RealTime"]}}}},"Identifier":"Recording ON","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"Set CallerId"}}]}