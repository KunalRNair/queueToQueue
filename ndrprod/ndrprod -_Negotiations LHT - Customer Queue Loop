{"Version":"2019-10-30","StartAction":"8c6f0bba-fbc4-441d-8352-f6a0ba2b4dc4","Metadata":{"entryPointPosition":{"x":-736.8,"y":214.4},"ActionMetadata":{"8c6f0bba-fbc4-441d-8352-f6a0ba2b4dc4":{"position":{"x":-581.6,"y":213.6}},"query hold duration":{"position":{"x":-365.6,"y":215.2},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"ndrProdCC-InvokeSalesforceRestApiFunction"}},"dynamicMetadata":{"methodName":false,"soql":false}},"Hold Message":{"position":{"x":-128,"y":-21.6},"isFriendlyName":true},"55sec Jazz Hold":{"position":{"x":119.2,"y":-196.8},"isFriendlyName":true,"parameters":{"PromptId":{"displayName":"55Seconds"}},"promptName":"55Seconds"},"Query Transfer Record for Early Transfer":{"position":{"x":336.8,"y":1.6},"isFriendlyName":true,"parameters":{"LambdaFunctionARN":{"displayName":"ndrProdCC-InvokeSalesforceRestApiFunction"}},"dynamicMetadata":{"methodName":false,"soql":false}},"f1a1ab94-7215-43b3-b085-fb0954c2891b":{"position":{"x":-116.8,"y":234.4},"parameters":{"LoopCount":{"useDynamic":true}},"useDynamic":true},"Check for early transfer":{"position":{"x":571.2,"y":0.8},"isFriendlyName":true,"conditions":[],"conditionMetadata":[{"id":"c16f0957-b942-4b47-a391-0e0b4a909599","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"}]},"clear callback minutes":{"position":{"x":820.8,"y":191.2},"isFriendlyName":true,"dynamicParams":[]},"3da23985-7b21-4ed8-9471-a139374ffd06":{"position":{"x":1980,"y":200}},"2f20e80a-9472-4de2-bcb7-8bc15b5add46":{"position":{"x":1784.8,"y":196},"parameters":{"AgentId":{"useDynamic":true}},"useDynamic":true,"queue":"$.Attributes.AWSUsername"},"c2706bb5-ac92-4d2c-8240-b33b05cc1faa":{"position":{"x":1054.4,"y":201.6},"parameters":{"LambdaFunctionARN":{"displayName":"ndrProdCC-InvokeSalesforceRestApiFunction"},"LambdaInvocationAttributes":{"recordId":{"useDynamic":true}}},"dynamicMetadata":{"methodName":false,"objectApiName":false,"recordId":true,"CurrentSegment__c":false}},"b55d06a4-3971-4f53-8ad7-cb46434bd7f9":{"position":{"x":1548.8,"y":200}},"CurrentSegment to TRUE":{"position":{"x":1313.6,"y":205.6},"isFriendlyName":true,"dynamicParams":[]}},"Annotations":[{"type":"default","id":"56deeabd-05c2-41a5-8657-ad78935bce2f","content":"Added 1/2/24 to see if returns from the parking lot are recorded","actionId":"b55d06a4-3971-4f53-8ad7-cb46434bd7f9","isFolded":true,"position":{"x":1955.1666666666667,"y":412.66666666666663},"size":{"height":295,"width":300}}],"name":"_Negotiations LHT - Customer Queue Loop","description":"Default audio played when a customer is waiting in queue.","type":"customerQueue","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"8c6f0bba-fbc4-441d-8352-f6a0ba2b4dc4","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"query hold duration"}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:792684595219:function:ndrProdCC-InvokeSalesforceRestApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"queryRecord","soql":"SELECT CallBackInMinutes__c FROM VoiceCall WHERE VendorCallKey = '$.Attributes.InitialContactId'"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"query hold duration","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"f1a1ab94-7215-43b3-b085-fb0954c2891b","Errors":[{"NextAction":"f1a1ab94-7215-43b3-b085-fb0954c2891b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Thank you for answering the call. The agent will be back on the line shortly."},"Identifier":"Hold Message","Type":"MessageParticipant","Transitions":{"NextAction":"55sec Jazz Hold","Errors":[{"NextAction":"55sec Jazz Hold","ErrorType":"NoMatchingError"}]}},{"Parameters":{"PromptId":"arn:aws:connect:us-east-1:792684595219:instance/5d95e262-b582-453a-af91-ee33a4dc6fce/prompt/aac3ad8b-0983-4259-ad9c-51443b263ca1"},"Identifier":"55sec Jazz Hold","Type":"MessageParticipant","Transitions":{"NextAction":"Query Transfer Record for Early Transfer","Errors":[{"NextAction":"Query Transfer Record for Early Transfer","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:792684595219:function:ndrProdCC-InvokeSalesforceRestApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"queryRecord","soql":"SELECT Hold_Override__c FROM VoiceCall WHERE Id = '$.Attributes.TransferCallRecordId'"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"Query Transfer Record for Early Transfer","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"Check for early transfer","Errors":[{"NextAction":"Check for early transfer","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"$.External.CallBackInMinutes__c"},"Identifier":"f1a1ab94-7215-43b3-b085-fb0954c2891b","Type":"Loop","Transitions":{"NextAction":"clear callback minutes","Conditions":[{"NextAction":"Hold Message","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"clear callback minutes","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"ComparisonValue":"$.External.Hold_Override__c"},"Identifier":"Check for early transfer","Type":"Compare","Transitions":{"NextAction":"f1a1ab94-7215-43b3-b085-fb0954c2891b","Conditions":[{"NextAction":"clear callback minutes","Condition":{"Operator":"Equals","Operands":["true"]}}],"Errors":[{"NextAction":"f1a1ab94-7215-43b3-b085-fb0954c2891b","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Attributes":{"sfdc-CallBackInMinutes__c":"NULL"},"TargetContact":"Current"},"Identifier":"clear callback minutes","Type":"UpdateContactAttributes","Transitions":{"NextAction":"c2706bb5-ac92-4d2c-8240-b33b05cc1faa","Errors":[{"NextAction":"c2706bb5-ac92-4d2c-8240-b33b05cc1faa","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"3da23985-7b21-4ed8-9471-a139374ffd06","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{"AgentId":"$.Attributes.AWSUsername"},"Identifier":"2f20e80a-9472-4de2-bcb7-8bc15b5add46","Type":"DequeueContactAndTransferToQueue","Transitions":{"NextAction":"3da23985-7b21-4ed8-9471-a139374ffd06","Errors":[{"NextAction":"3da23985-7b21-4ed8-9471-a139374ffd06","ErrorType":"QueueAtCapacity"},{"NextAction":"3da23985-7b21-4ed8-9471-a139374ffd06","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:792684595219:function:ndrProdCC-InvokeSalesforceRestApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"updateRecord","objectApiName":"VoiceCall","recordId":"$.Attributes.TransferCallRecordId","CurrentSegment__c":"false"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"c2706bb5-ac92-4d2c-8240-b33b05cc1faa","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"CurrentSegment to TRUE","Errors":[{"NextAction":"CurrentSegment to TRUE","ErrorType":"NoMatchingError"}]}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"]},"AnalyticsBehavior":{"Enabled":"True","AnalyticsLanguage":"en-US","AnalyticsRedactionBehavior":"Disabled","AnalyticsRedactionResults":"RedactedAndOriginal","ChannelConfiguration":{"Chat":{"AnalyticsModes":[]},"Voice":{"AnalyticsModes":["RealTime"]}}}},"Identifier":"b55d06a4-3971-4f53-8ad7-cb46434bd7f9","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"2f20e80a-9472-4de2-bcb7-8bc15b5add46"}},{"Parameters":{"Attributes":{"sfdc-CurrentSegment__c":"true"},"TargetContact":"Current"},"Identifier":"CurrentSegment to TRUE","Type":"UpdateContactAttributes","Transitions":{"NextAction":"b55d06a4-3971-4f53-8ad7-cb46434bd7f9","Errors":[{"NextAction":"b55d06a4-3971-4f53-8ad7-cb46434bd7f9","ErrorType":"NoMatchingError"}]}}]}